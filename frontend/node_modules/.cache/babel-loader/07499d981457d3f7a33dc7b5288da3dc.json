{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{useEffect,useState}from\"react\";import{Link as ReactRouterLink,useParams}from\"react-router-dom\";import{Box,Flex,Image,Tabs,TabList,Tab,TabPanels,TabPanel,Text,VStack,SimpleGrid,LinkBox,LinkOverlay}from\"@chakra-ui/react\";import{formatPrice,CW721,Market,publicIpfsUrl,useSdk}from\"../../services\";import{config}from\"../../../config\";import{NftCard}from\"../../components\";import userLogo from\"../../assets/user-default.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var maxItemsPerPage=15;export var Account=function Account(){var _useParams=useParams(),user=_useParams.user;var _useSdk=useSdk(),client=_useSdk.client,address=_useSdk.address;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),nfts=_useState2[0],setNfts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),nftSale=_useState4[0],setNftSale=_useState4[1];var getNftsInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(ids,contract){var allNfts,tokens;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:allNfts=[];ids.forEach(function(tokenId){allNfts.push(contract.nftInfo(tokenId));});_context.next=4;return Promise.all(allNfts);case 4:tokens=_context.sent;return _context.abrupt(\"return\",tokens.map(function(nft,idx){return{tokenId:ids[idx],user:'unknown',title:nft.name,price:'Not listed',image:publicIpfsUrl(nft.image),total:1};}));case 6:case\"end\":return _context.stop();}}},_callee);}));return function getNftsInfo(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var contract,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(!client||!user)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:contract=CW721(config.contract).use(client);_context2.next=5;return contract.tokens(user,undefined,maxItemsPerPage);case 5:result=_context2.sent;_context2.t0=setNfts;_context2.next=9;return getNftsInfo(result.tokens,contract);case 9:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 11:case\"end\":return _context2.stop();}}},_callee2);}))();},[client,user]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var contract,marketcw,result,tokens,items;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(!client||!user)){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:contract=CW721(config.contract).use(client);marketcw=Market(config.marketContract).use(client);_context3.next=6;return marketcw.offersBySeller(user,undefined,maxItemsPerPage);case 6:result=_context3.sent;_context3.next=9;return getNftsInfo(result.offers.map(function(o){return o.token_id;}),contract);case 9:tokens=_context3.sent;items=tokens.map(function(nft,idx){var off=result.offers[idx];nft.price=formatPrice(off.list_price);return nft;});setNftSale(items);case 12:case\"end\":return _context3.stop();}}},_callee3);}))();},[client,user]);var getNftPath=function getNftPath(nftId){return\"\".concat(address===user?\"/account\":\"\",\"/token/\").concat(nftId);};return/*#__PURE__*/_jsx(Box,{m:5,children:/*#__PURE__*/_jsxs(VStack,{spacing:10,align:\"stretch\",children:[/*#__PURE__*/_jsx(Flex,{justifyContent:\"center\",children:/*#__PURE__*/_jsxs(VStack,{spacing:4,children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Image,{borderRadius:\"full\",boxSize:\"120px\",src:userLogo})}),/*#__PURE__*/_jsx(Box,{bg:\"gray.500\",borderRadius:\"xl\",py:1,px:3,children:/*#__PURE__*/_jsx(Text,{color:\"white\",fontFamily:\"mono\",fontSize:\"sm\",children:user})})]})}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Tabs,{isManual:true,isLazy:true,defaultIndex:1,colorScheme:\"cyan\",children:[/*#__PURE__*/_jsxs(TabList,{children:[/*#__PURE__*/_jsx(Tab,{children:\"On Sale\"}),/*#__PURE__*/_jsx(Tab,{children:\"Owned\"})]}),/*#__PURE__*/_jsxs(TabPanels,{children:[/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(SimpleGrid,{spacing:10,gridTemplateColumns:[\"repeat(1, minmax(0px, 1fr))\",\"repeat(3, minmax(0px, 1fr))\",\"repeat(5, minmax(0px, 1fr))\"],children:nftSale.map(function(nft){return/*#__PURE__*/_jsx(LinkBox,{as:\"picture\",transition:\"transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1) 0s\",_hover:{transform:\"scale(1.05)\"},children:/*#__PURE__*/_jsx(LinkOverlay,{as:ReactRouterLink,to:getNftPath(nft.tokenId),children:/*#__PURE__*/_jsx(NftCard,{nft:nft})})},nft.tokenId);})})}),/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(SimpleGrid,{spacing:10,gridTemplateColumns:[\"repeat(1, minmax(0px, 1fr))\",\"repeat(3, minmax(0px, 1fr))\",\"repeat(5, minmax(0px, 1fr))\"],children:nfts.map(function(nft){return/*#__PURE__*/_jsx(LinkBox,{as:\"picture\",transition:\"transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1) 0s\",_hover:{transform:\"scale(1.05)\"},children:/*#__PURE__*/_jsx(LinkOverlay,{as:ReactRouterLink,to:getNftPath(nft.tokenId),children:/*#__PURE__*/_jsx(NftCard,{nft:nft})})},nft.tokenId);})})})]})]})})]})});};","map":null,"metadata":{},"sourceType":"module"}