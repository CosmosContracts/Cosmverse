{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{useCallback,useEffect,useMemo,useState}from\"react\";import{createClient,createSimpleClient}from\"./sdk\";import{jsx as _jsx}from\"react/jsx-runtime\";function throwNotInitialized(){throw new Error(\"Not yet initialized\");}var defaultContext={initialized:false,init:throwNotInitialized,clear:throwNotInitialized,config:{},client:undefined,changeConfig:throwNotInitialized,address:\"\",balance:[],refreshBalance:throwNotInitialized,getSigner:function getSigner(){return undefined;},changeSigner:throwNotInitialized,getSignClient:function getSignClient(){return undefined;}};var CosmWasmContext=/*#__PURE__*/React.createContext(defaultContext);export var useSdk=function useSdk(){return React.useContext(CosmWasmContext);};export function SdkProvider(_ref){var configProp=_ref.config,children=_ref.children;var _useState=useState(configProp),_useState2=_slicedToArray(_useState,2),config=_useState2[0],setConfig=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),signer=_useState4[0],setSigner=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),client=_useState6[0],setClient=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),signClient=_useState8[0],setSignClient=_useState8[1];var contextWithInit=useMemo(function(){return _objectSpread(_objectSpread({},defaultContext),{},{init:setSigner});},[]);var _useState9=useState(contextWithInit),_useState10=_slicedToArray(_useState9,2),value=_useState10[0],setValue=_useState10[1];var clear=useCallback(function(){setValue(_objectSpread({},contextWithInit));setClient(undefined);setSigner(undefined);setConfig(configProp);},[contextWithInit,configProp]);function changeConfig(updates){setConfig(function(config){return _objectSpread(_objectSpread({},config),updates);});}var refreshBalance=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(address,balance){var coin;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(client){_context.next=2;break;}return _context.abrupt(\"return\");case 2:balance.length=0;_context.next=5;return client.getBalance(address,config.token.coinMinimalDenom);case 5:coin=_context.sent;if(coin)balance.push(coin);case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}(),[client,config]);useEffect(function(){(function(){var _updateClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var client;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return createSimpleClient(config);case 2:client=_context2.sent;setClient(client);setValue(_objectSpread(_objectSpread({},contextWithInit),{},{client:client}));case 5:case\"end\":return _context2.stop();}}},_callee2);}));function updateClient(){return _updateClient.apply(this,arguments);}return updateClient;})()();},[contextWithInit,config]);useEffect(function(){if(!signer)return;(function(){var _updateSignClient=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var client;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return createClient(config,signer);case 2:client=_context3.sent;setSignClient(client);case 4:case\"end\":return _context3.stop();}}},_callee3);}));function updateSignClient(){return _updateSignClient.apply(this,arguments);}return updateSignClient;})()();},[signer,config]);useEffect(function(){if(!signer||!client||!signClient)return;var balance=[];(function(){var _updateValue=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var address;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return signer.getAccounts();case 2:address=_context4.sent[0].address;_context4.next=5;return refreshBalance(address,balance);case 5:setValue({initialized:true,init:function init(){},clear:clear,config:config,client:client,changeConfig:changeConfig,address:address,balance:balance,refreshBalance:refreshBalance.bind(null,address,balance),getSigner:function getSigner(){return signer;},changeSigner:setSigner,getSignClient:function getSignClient(){return signClient;}});case 6:case\"end\":return _context4.stop();}}},_callee4);}));function updateValue(){return _updateValue.apply(this,arguments);}return updateValue;})()();},[signClient,signer,clear,client,config,refreshBalance]);return/*#__PURE__*/_jsx(CosmWasmContext.Provider,{value:value,children:children});}","map":null,"metadata":{},"sourceType":"module"}