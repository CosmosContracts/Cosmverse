{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/pauloponciano/Documents/cosmverse/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{Link as ReactRouterLink}from\"react-router-dom\";import{Button,useColorModeValue,Avatar,useBoolean,Popover,PopoverTrigger,PopoverContent,Link,Box,chakra,VStack,Text,GridItem,Grid,Flex,Badge,useDisclosure,PopoverFooter,PopoverBody}from'@chakra-ui/react';import{MdAccountBalanceWallet}from\"react-icons/md\";import{useSdk}from\"../../services/client/wallet\";import{config}from\"../../../config\";import{configKeplr,loadKeplrWallet,formatAddress,formatPrice,getTokenConfig}from\"../../services\";import userLogo from\"../../assets/user-default.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function AccountButton(){var sdk=useSdk();var _useDisclosure=useDisclosure(),onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose,isOpen=_useDisclosure.isOpen;var _useBoolean=useBoolean(),_useBoolean2=_slicedToArray(_useBoolean,2),loading=_useBoolean2[0],setLoading=_useBoolean2[1];function init(_x){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(loadWallet){var signer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return loadWallet(config.chainId,config.addressPrefix);case 2:signer=_context.sent;sdk.init(signer);case 4:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}function connectKeplr(){return _connectKeplr.apply(this,arguments);}function _connectKeplr(){_connectKeplr=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var anyWindow,_anyWindow$keplr,_anyWindow$keplr2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading.on();anyWindow=window;_context2.prev=2;_context2.next=5;return(_anyWindow$keplr=anyWindow.keplr)===null||_anyWindow$keplr===void 0?void 0:_anyWindow$keplr.experimentalSuggestChain(configKeplr(config));case 5:_context2.next=7;return(_anyWindow$keplr2=anyWindow.keplr)===null||_anyWindow$keplr2===void 0?void 0:_anyWindow$keplr2.enable(config.chainId);case 7:_context2.next=9;return init(loadKeplrWallet);case 9:_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);setLoading.off();console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return _connectKeplr.apply(this,arguments);}var loginButton=/*#__PURE__*/_jsx(Button,{isLoading:loading,loadingText:\"Connecting...\",rightIcon:/*#__PURE__*/_jsx(MdAccountBalanceWallet,{}),fontSize:'sm',fontWeight:500,variant:'outline',borderRadius:\"50px\",height:\"var(--chakra-sizes-8)\",marginTop:\"4px\",borderColor:useColorModeValue('cyan.900','white.200'),onClick:connectKeplr,children:\"Connect wallet\"});var MenuLink=function MenuLink(props){return/*#__PURE__*/_jsx(Box,{p:1,rounded:6,_hover:{bg:useColorModeValue('gray.500','cyan.900')},children:/*#__PURE__*/_jsx(Link,{fontSize:'md',as:ReactRouterLink,to:props.href,onClick:onClose,_hover:{textDecoration:'none'},children:props.label})});};var BalanceItem=function BalanceItem(props){var coin=getTokenConfig(props.coin.denom);if(!coin)return/*#__PURE__*/_jsx(_Fragment,{});return/*#__PURE__*/_jsxs(Grid,{templateColumns:\"repeat(10, 1fr)\",gap:4,children:[/*#__PURE__*/_jsx(GridItem,{colSpan:2,children:/*#__PURE__*/_jsx(Flex,{h:\"full\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Avatar,{size:\"sm\",name:coin.name,src:coin.logo})})}),/*#__PURE__*/_jsxs(GridItem,{colSpan:8,textAlign:\"left\",children:[/*#__PURE__*/_jsx(chakra.p,{fontSize:\"xs\",children:\"Balance\"}),/*#__PURE__*/_jsx(chakra.p,{fontWeight:\"semibold\",children:formatPrice(props.coin)})]})]});};var accountBox=/*#__PURE__*/_jsxs(Popover,{isOpen:isOpen,placement:\"bottom-start\",onOpen:onOpen,onClose:onClose,children:[/*#__PURE__*/_jsx(PopoverTrigger,{children:/*#__PURE__*/_jsx(Avatar,{cursor:\"pointer\",size:\"sm\",name:\"Juno\",src:userLogo})}),/*#__PURE__*/_jsxs(PopoverContent,{mt:\"0.5rem\",maxW:\"sm\",bg:useColorModeValue('white','gray.500'),children:[/*#__PURE__*/_jsx(PopoverBody,{p:0,children:/*#__PURE__*/_jsxs(VStack,{px:8,pt:6,pb:3,align:\"left\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Badge,{fontSize:\"0.6rem\",variant:\"outline\",colorScheme:\"orange\",children:\"Lucina Testnet\"}),/*#__PURE__*/_jsx(Text,{fontSize:\"md\",fontWeight:\"semibold\",children:formatAddress(sdk.address)})]}),/*#__PURE__*/_jsx(Box,{py:2,children:sdk.balance.map(function(coin){return/*#__PURE__*/_jsx(BalanceItem,{coin:coin},coin.denom);})})]})}),/*#__PURE__*/_jsx(PopoverFooter,{p:0,children:/*#__PURE__*/_jsx(Box,{px:8,pb:6,pt:3,children:/*#__PURE__*/_jsx(MenuLink,{href:\"/account/\".concat(sdk.address),label:\"My Items\"})})})]})]});return sdk.address?accountBox:loginButton;}","map":null,"metadata":{},"sourceType":"module"}